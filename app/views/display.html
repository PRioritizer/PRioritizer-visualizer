<div class="row" ng-show="pullRequests.length > 0">
  <h3>Repository</h3>
  <p>Owner: {{owner}}, name: {{repository}}, <a ng-href="{{github}}" title="View this repository on GitHub" target="_blank"><i class="fa fa-github"></i></a></p>
  <h3>Sort</h3>
  <p>Filter on:
    <span ng-repeat="branch in branches">
      <button type="button" class="btn" ng-class="branchClass(branch, 'btn-')" ng-click="$parent.selectedBranch = branch">{{branch}}</button>
    </span>
  </p>
  <p>Sort on:
    <a href ng-click="sort(onNumber)">number</a>,
    <a href ng-click="sort(onDate)">date</a>,
    <a href ng-click="sort(onNumberConflicts)">number of conflicts</a>,
    <a href ng-click="sort(onSize('lines'))">lines</a>,
    <a href ng-click="sort(onSize('files'))">files</a>,
    <a href ng-click="sort(onSize('commits'))">commits</a>,
    <a href ng-click="sort(onContributor)">contributor</a>,
    <a href ng-click="sort(onPrevPullRequests)">history</a>,
    <a href ng-click="sort(onMergeable)">mergeable</a>
  </p>
  <h3>Pull requests</h3>
  <div ng-controller="PullRequestController">
    <div id="pr{{pr.number}}" ng-repeat="pr in pullRequests | filter:{target: selectedBranch}:true | orderBy:sortFunc:sortOrder | limitTo:25" class="pull-request" ng-class="{mergeable: pr.isMergeable}" ng-class-even="'even'" ng-class-odd="'odd'">
      <h4>
        <i class="icon fa fa-code-fork" title="Can be merged directly on GitHub" ng-show="pr.isMergeable"></i>
        <i class="icon fa fa-code-fork" title="Cannot be merged directly on GitHub" ng-show="!pr.isMergeable"></i>
        {{pr.title}}
        <span class="text-muted">
          #{{pr.number}}
          <a ng-href="{{github}}/pull/{{pr.number}}" title="View this pull request on GitHub" target="_blank"><i class="fa fa-github"></i></a>
        </span>
      </h4>
      <p class="source-target">from <span class="label label-default">{{pr.author}}:{{pr.source}}</span> into <span class="label" ng-class="branchClass(pr.target, 'label-')">{{pr.target}}</span></p>
      <p>Date: {{pr.createdAt | date:'dd MMM yyyy @ HH:mm'}}</p>
      <p>Author: {{pr.author}}</p>
      <p>ContributorIndex: <pie-chart title="{{pr.contributorIndex*100 | number:0}}%" data="getPart(pr.contributorIndex,20)"></pie-chart></p>
      <p>AcceptRatio: <pie-chart title="{{pr.acceptedPullRequests/pr.totalPullRequests*100 || 0 | number:0}}%" data="getPart(pr.acceptedPullRequests/pr.totalPullRequests,20)"></pie-chart></p>
      <p>
        Conflicts with:
        <span ng-repeat="n in pr.conflictsWith | limitTo:10">
          <span class="label label-default cross-reference" ng-click="scrollTo('pr' + n)">#{{n}}</span>
        </span>
        <span ng-show="pr.conflictsWith.length > 10">and {{pr.conflictsWith.length - 10}} more...</span>
      </p>
      <div class="line-bar" title="++{{pr.linesAdded}}, --{{pr.linesDeleted}}">
        <div class="deleted">
          <i class="icon fa fa-circle"></i><i class="icon fa fa-circle"></i><i class="icon fa fa-circle"></i><i class="icon fa fa-circle"></i><i class="icon fa fa-circle"></i><i class="icon fa fa-circle"></i>
        </div>
        <div class="added" ng-style="{width: getPercentageAdded(pr,6) + '%'}">
          <i class="icon fa fa-circle"></i><i class="icon fa fa-circle"></i><i class="icon fa fa-circle"></i><i class="icon fa fa-circle"></i><i class="icon fa fa-circle"></i><i class="icon fa fa-circle"></i>
        </div>
      </div>
      <p>
        lines: {{pr.linesAdded + pr.linesDeleted}},
        files: {{pr.filesChanged}},
        commit: {{pr.commits}}
      </p>
    </div>
  </div>
</div>
<div ng-show="!pullRequests.length">
  <h3>No data</h3>
  <p>
    There is no data available yet. First, select a file on the <a ng-href="#read">previous page</a>.
  </p>
</div>
